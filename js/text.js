/**
* @license RequireJS text 2.0.4 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/requirejs/text for details
*/
/*jslint regexp: true */
/*global require: false, XMLHttpRequest: false, ActiveXObject: false,
define: false, window: false, process: false, Packages: false,
java: false, location: false */

define(['module'],function(k){'use strict';var l,fs,progIds=['Msxml2.XMLHTTP','Microsoft.XMLHTTP','Msxml2.XMLHTTP.4.0'],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation=typeof location!=='undefined'&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,''),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||undefined),buildMap=[],masterConfig=(k.config&&k.config())||{};l={version:'2.0.4',strip:function(a){if(a){a=a.replace(xmlRegExp,"");var b=a.match(bodyRegExp);if(b){a=b[1]}}else{a=""}return a},jsEscape:function(a){return a.replace(/(['\\])/g,'\\$1').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:masterConfig.createXhr||function(){var a,i,progId;if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest()}else if(typeof ActiveXObject!=="undefined"){for(i=0;i<3;i+=1){progId=progIds[i];try{a=new ActiveXObject(progId)}catch(e){}if(a){progIds=[progId];break}}}return a},parseName:function(a){var b,ext,temp,strip=false,index=a.indexOf("."),isRelative=a.indexOf('./')===0||a.indexOf('../')===0;if(index!==-1&&(!isRelative||index>1)){b=a.substring(0,index);ext=a.substring(index+1,a.length)}else{b=a}temp=ext||b;index=temp.indexOf("!");if(index!==-1){strip=temp.substring(index+1)==="strip";temp=temp.substring(0,index);if(ext){ext=temp}else{b=temp}}return{moduleName:b,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,b,c,d){var e,uHostName,uPort,match=l.xdRegExp.exec(a);if(!match){return true}e=match[2];uHostName=match[3];uHostName=uHostName.split(':');uPort=uHostName[1];uHostName=uHostName[0];return(!e||e===b)&&(!uHostName||uHostName.toLowerCase()===c.toLowerCase())&&((!uPort&&!uHostName)||uPort===d)},finishLoad:function(a,b,c,d){c=b?l.strip(c):c;if(masterConfig.isBuild){buildMap[a]=c}d(c)},load:function(b,c,d,e){if(e.isBuild&&!e.inlineText){d();return}masterConfig.isBuild=e.isBuild;var f=l.parseName(b),nonStripName=f.moduleName+(f.ext?'.'+f.ext:''),url=c.toUrl(nonStripName),useXhr=(masterConfig.useXhr)||l.useXhr;if(!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)){l.get(url,function(a){l.finishLoad(b,f.strip,a,d)},function(a){if(d.error){d.error(a)}})}else{c([nonStripName],function(a){l.finishLoad(f.moduleName+'.'+f.ext,f.strip,a,d)})}},write:function(a,b,c,d){if(buildMap.hasOwnProperty(b)){var e=l.jsEscape(buildMap[b]);c.asModule(a+"!"+b,"define(function () { return '"+e+"';});\n")}},writeFile:function(e,f,g,h,i){var j=l.parseName(f),extPart=j.ext?'.'+j.ext:'',nonStripName=j.moduleName+extPart,fileName=g.toUrl(j.moduleName+extPart)+'.js';l.load(nonStripName,g,function(c){var d=function(a){return h(fileName,a)};d.asModule=function(a,b){return h.asModule(a,fileName,b)};l.write(e,nonStripName,d,i)},i)}};if(masterConfig.env==='node'||(!masterConfig.env&&typeof process!=="undefined"&&process.versions&&!!process.versions.node)){fs=require.nodeRequire('fs');l.get=function(a,b){var c=fs.readFileSync(a,'utf8');if(c.indexOf('\uFEFF')===0){c=c.substring(1)}b(c)}}else if(masterConfig.env==='xhr'||(!masterConfig.env&&l.createXhr())){l.get=function(c,d,e){var f=l.createXhr();f.open('GET',c,true);if(masterConfig.onXhr){masterConfig.onXhr(f,c)}f.onreadystatechange=function(a){var b,err;if(f.readyState===4){b=f.status;if(b>399&&b<600){err=new Error(c+' HTTP status: '+b);err.xhr=f;e(err)}else{d(f.responseText)}}};f.send(null)}}else if(masterConfig.env==='rhino'||(!masterConfig.env&&typeof Packages!=='undefined'&&typeof java!=='undefined')){l.get=function(a,b){var c,line,encoding="utf-8",file=new java.io.File(a),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),encoding)),content='';try{c=new java.lang.StringBuffer();line=input.readLine();if(line&&line.length()&&line.charAt(0)===0xfeff){line=line.substring(1)}c.append(line);while((line=input.readLine())!==null){c.append(lineSeparator);c.append(line)}content=String(c.toString())}finally{input.close()}b(content)}}return l});